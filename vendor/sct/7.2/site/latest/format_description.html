

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="./">
<head>
  <meta charset="utf-8" />
  <meta name="readthedocs-addons-api-version" content="1"><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>1. Overview &mdash; NWB Format Specification 2.10.0-alpha documentation</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=03e43079" />
      <link rel="stylesheet" type="text/css" href="_static/css/theme.css?v=e59714d7" />
      <link rel="stylesheet" type="text/css" href="_static/theme_overrides.css?v=0c24fe83" />

  
      <script src="_static/jquery.js?v=5d32c60e"></script>
      <script src="_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="_static/documentation_options.js?v=9c85597e"></script>
      <script src="_static/doctools.js?v=9bcbadda"></script>
      <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="_static/js/theme.js"></script>
    <script src="_static/js/versions.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="1. Format Overview" href="format.html" />
    <link rel="prev" title="Welcome to the NWB Format Specification" href="index.html" /> 
<script async type="text/javascript" src="/_/static/javascript/readthedocs-addons.js"></script><meta name="readthedocs-project-slug" content="nwb-schema" /><meta name="readthedocs-version-slug" content="latest" /><meta name="readthedocs-resolver-filename" content="/format_description.html" /><meta name="readthedocs-http-status" content="200" /></head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="index.html" class="icon icon-home">
            NWB Format Specification
          </a>
              <div class="switch-menus">
                <div class="version-switch"></div>
                <div class="language-switch"></div>
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Introduction</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">1. Overview</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#neurodata-type-assigning-types-to-specifications">1.1. <code class="docutils literal notranslate"><span class="pre">neurodata_type</span></code> : Assigning types to specifications</a></li>
<li class="toctree-l2"><a class="reference internal" href="#nwbcontainer-nwbdata-nwbdatainterface-base-neurodata-types-for-containers-and-datasets">1.2. <code class="docutils literal notranslate"><span class="pre">NWBContainer</span></code>, <code class="docutils literal notranslate"><span class="pre">NWBData</span></code>, <code class="docutils literal notranslate"><span class="pre">NWBDataInterface</span></code>: Base neurodata_types for containers and datasets</a></li>
<li class="toctree-l2"><a class="reference internal" href="#time-series-a-base-neurodata-type-for-storing-time-series-data">1.3. <code class="docutils literal notranslate"><span class="pre">Time</span> <span class="pre">Series</span></code> : A base neurodata_type for storing time series data</a></li>
<li class="toctree-l2"><a class="reference internal" href="#data-processing-modules-organizing-processed-data">1.4. Data Processing Modules: Organizing processed data</a></li>
<li class="toctree-l2"><a class="reference internal" href="#extending-the-format">1.5. Extending the format</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#extending-timeseries-and-nwbcontainer">1.5.1. Extending TimeSeries and NWBContainer</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#common-attributes">1.6. Common attributes</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="#comments-and-definitions">2. Comments and Definitions</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#notation">2.1. Notation</a></li>
<li class="toctree-l2"><a class="reference internal" href="#storing-time-values">2.2. Storing Time Values</a></li>
<li class="toctree-l2"><a class="reference internal" href="#links-and-data-references">2.3. Links and data references</a></li>
<li class="toctree-l2"><a class="reference internal" href="#design-notes">2.4. Design notes</a></li>
<li class="toctree-l2"><a class="reference internal" href="#tables-and-ragged-arrays">2.5. Tables and ragged arrays</a></li>
<li class="toctree-l2"><a class="reference internal" href="#doubly-ragged-arrays">2.6. Doubly ragged arrays</a></li>
<li class="toctree-l2"><a class="reference internal" href="#references-to-rows-of-a-table">2.7. References to rows of a table</a></li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Format Specification</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="format.html">1. Format Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="format.html#type-specifications">2. Type Specifications</a></li>
<li class="toctree-l1"><a class="reference internal" href="format.html#schema-sources">3. Schema Sources</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">History &amp; Legal</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="software_process.html">Making a Pull Request</a></li>
<li class="toctree-l1"><a class="reference internal" href="software_process.html#merging-prs-and-making-releases">Merging PRs and Making Releases</a></li>
<li class="toctree-l1"><a class="reference internal" href="software_process.html#making-a-release-checklist">Making a Release Checklist</a></li>
<li class="toctree-l1"><a class="reference internal" href="software_process.html#the-dev-branch-and-releases">The “dev” Branch and Releases</a></li>
<li class="toctree-l1"><a class="reference internal" href="format_release_notes.html">Release Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="credits.html">Credits</a></li>
<li class="toctree-l1"><a class="reference internal" href="credits.html#legal">Legal</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">NWB Format Specification</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active"><span class="section-number">1. </span>Overview</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/format_description.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="overview">
<h1><span class="section-number">1. </span>Overview<a class="headerlink" href="#overview" title="Link to this heading"></a></h1>
<p>The NWB Format is a core component of the
<a class="reference external" href="https://www.nwb.org/nwb-software/">Neurodata Without Borders (NWB)</a>  project.
The NWB format is designed to store general optical and electrical physiology data in a way that
is both understandable to humans as well as accessible to programmatic interpretation. The format is
designed to be friendly to and usable by software tools and analysis
scripts, and to impose few a priori assumptions about data
representation and analysis.</p>
<p>The NWB format uses the following main primitives to hierarchically organize neuroscience data :</p>
<ul class="simple">
<li><p>A <em>Group</em> is similar to a folder and may contain an arbitrary number of other groups and datasets,</p></li>
<li><p>A <em>Dataset</em> describes an n-dimensional array and provides the primary means for storing data,</p></li>
<li><p>An <em>Attribute*</em> is a small dataset that is attached to a specific group or dataset and is typically used to
store metadata specific to the object they are associated with, and</p></li>
<li><p>A <em>Link</em> is a reference to another group or dataset.</p></li>
</ul>
<p>The NWB format is formally described via formal specification documents using the <a class="reference external" href="https://schema-language.readthedocs.io">NWB specification language</a> .
HDF5 currently serves as the main format for storing data in the NWB format (see <a class="reference external" href="https://nwb-storage.readthedocs.io">https://nwb-storage.readthedocs.io</a> for details).
The <a class="reference external" href="https://pynwb.readthedocs.io">PyNWB</a> API is available to enable users to efficiently interact with NWB format files.</p>
<p>The NWB format uses a modular design in which all main semantic components of the format have
a unique <em>neurodata_type</em> (similar to a Class in object-oriented design)(<a class="reference internal" href="#sec-neurodata-type-intro"><span class="std std-numref">Section 1.1</span></a>).
This allows for reuse and extension of types through inclusion and inheritance. All datasets and groups
in the format can be uniquely identified by either their name and/or <em>neurodata_type</em>.</p>
<p>Two important base types in the NWB format are <em>NWBContainer</em> and <em>TimeSeries</em>. <em>NWBContainer</em> defines a
generic container for storing collection of data and is used to define common features and functionality
across data containers (see <a class="reference internal" href="#sec-nwbcontainer-intro"><span class="std std-numref">Section 1.2</span></a>). <em>TimeSeries</em> is a central component in
the NWB format for storing complex temporal series (see <a class="reference internal" href="#sec-timeseries-intro"><span class="std std-numref">Section 1.3</span></a>). In the format,
these types are then extended to define more specialized types. To organize and define collections of processed data
from common data processing steps, the NWB format then defines the concept of <em>ProcessingModule</em> where each processing
step is represented by a corresponding <em>NWBDataInterface</em> (an extension of <em>NWBContainer</em>)
(see <a class="reference internal" href="#sec-data-processing-modules"><span class="std std-numref">Section 1.4</span></a> for details).</p>
<p>At a high level, data is organized into the following main groups:</p>
<ul class="simple">
<li><p><em>acquisition/</em> : data streams recorded from the system, including ephys, ophys, tracking, etc.,</p></li>
<li><p><em>intervals/</em> : experimental intervals,</p></li>
<li><p><em>stimulus/</em> : stimulus data,</p></li>
<li><p><em>general/</em> : experimental metadata, including protocol, notes and description of hardware device(s).</p></li>
<li><p><em>processing/</em> : standardized processing modules, often as part of intermediate analysis of data that is necessary to perform before scientific analysis,</p></li>
<li><p><em>analysis/</em> : lab-specific and custom scientific analysis of data.</p></li>
</ul>
<p>The high-level data organization within NWB files is described in detail in <a class="reference internal" href="format.html#sec-nwbfile"><span class="std std-numref">Section 2.5.2</span></a>.
The top-level datasets and attributes are described in <a class="reference internal" href="format.html#table-nwbfile-data"><span class="std std-numref">Table 2.27</span></a> and
the top-level organization of data into groups is described in <a class="reference internal" href="format.html#table-nwbfile-groups"><span class="std std-numref">Table 2.28</span></a>.</p>
<section id="neurodata-type-assigning-types-to-specifications">
<span id="sec-neurodata-type-intro"></span><h2><span class="section-number">1.1. </span><code class="docutils literal notranslate"><span class="pre">neurodata_type</span></code> : Assigning types to specifications<a class="headerlink" href="#neurodata-type-assigning-types-to-specifications" title="Link to this heading"></a></h2>
<p>The concept of a <em>neurodata_type</em> is similar to the concept of a Class in object-oriented programming.
In the NWB format, groups or datasets may be given a unique <em>neurodata_type</em>. The <em>neurodata_type</em>
allows the unique identification of the type of objects in the format and also enable the reuse of
types through the concept of inheritance. A group or dataset may, hence, define a new <em>neurodata_type</em>
while extending an existing type. E.g., <em>AbstractFeatureSeries</em> defines a new type that
inherits from <em>TimeSeries</em>.</p>
</section>
<section id="nwbcontainer-nwbdata-nwbdatainterface-base-neurodata-types-for-containers-and-datasets">
<span id="sec-nwbcontainer-intro"></span><h2><span class="section-number">1.2. </span><code class="docutils literal notranslate"><span class="pre">NWBContainer</span></code>, <code class="docutils literal notranslate"><span class="pre">NWBData</span></code>, <code class="docutils literal notranslate"><span class="pre">NWBDataInterface</span></code>: Base neurodata_types for containers and datasets<a class="headerlink" href="#nwbcontainer-nwbdata-nwbdatainterface-base-neurodata-types-for-containers-and-datasets" title="Link to this heading"></a></h2>
<p><a class="reference internal" href="format.html#sec-nwbcontainer"><span class="std std-ref">NWBContainer</span></a> is a specification of a group that defines a generic container for
storing collections of data. <a class="reference internal" href="format.html#sec-nwbcontainer"><span class="std std-ref">NWBContainer</span></a> serves as the base type for all main data containers
(including <a class="reference internal" href="format.html#sec-timeseries"><span class="std std-ref">TimeSeries</span></a>) of the core NWB data
format and allows us to define and integrate new common functionality in a central place and via common mechanisms
(see <a class="reference internal" href="format.html#sec-nwbcontainer"><span class="std std-numref">Section 2.1.7</span></a>).</p>
<p><a class="reference internal" href="format.html#sec-nwbdatainterface"><span class="std std-ref">NWBDataInterface</span></a> extends <a class="reference internal" href="format.html#sec-nwbcontainer"><span class="std std-ref">NWBContainer</span></a> and
serves as base type for primary data (e.g., experimental or analysis data) and is used to
distinguish in the schema between non-metadata data containers and metadata containers
(see <a class="reference internal" href="format.html#sec-nwbdatainterface"><span class="std std-numref">Section 2.1.8</span></a>).</p>
<p><a class="reference internal" href="format.html#sec-nwbdata"><span class="std std-ref">NWBData</span></a> is a specification of a Dataset that functions as a common base neurodata_type for
datasets with an assigned <em>neurodata_type</em> (see <a class="reference internal" href="format.html#sec-nwbdata"><span class="std std-numref">Section 2.1.1</span></a>).</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The concept of <a class="reference internal" href="format.html#sec-nwbcontainer"><span class="std std-ref">NWBContainer</span></a> and <a class="reference internal" href="format.html#sec-nwbdata"><span class="std std-ref">NWBData</span></a> have been introduced in
NWB 2. <a class="reference internal" href="format.html#sec-nwbdatainterface"><span class="std std-ref">NWBDataInterface</span></a> (also introduced in NWB 2) replaces <code class="docutils literal notranslate"><span class="pre">Interface</span></code>
from NWB 1.x. <code class="docutils literal notranslate"><span class="pre">Interface</span></code>  was renamed to <em>NWBDataInterface</em> to ease intuition and
the concept was generalized via <a class="reference internal" href="format.html#sec-nwbcontainer"><span class="std std-ref">NWBContainer</span></a> to provide a common base for
data containers (rather than being specific to <em>ProcessingModules</em> as in NWB 1.x).</p>
</div>
</section>
<section id="time-series-a-base-neurodata-type-for-storing-time-series-data">
<span id="sec-timeseries-intro"></span><h2><span class="section-number">1.3. </span><code class="docutils literal notranslate"><span class="pre">Time</span> <span class="pre">Series</span></code> : A base neurodata_type for storing time series data<a class="headerlink" href="#time-series-a-base-neurodata-type-for-storing-time-series-data" title="Link to this heading"></a></h2>
<p>The file format is designed around a data structure called a
<em>TimeSeries</em> which stores time-varying data. A <em>TimeSeries</em> is a
superset of several neurodata_types, including signal events, image stacks
and experimental events. To account for different storage requirements
and different modalities, a <em>TimeSeries</em> is defined in a minimal form
and it can be extended (i.e., subclassed) to account for different
modalities and data storage requirements (see <a class="reference internal" href="#sec-extending-the-format"><span class="std std-numref">Section 1.5</span></a>).</p>
<p>Each <em>TimeSeries</em> has its own HDF5 group, and all datasets belonging to
a <em>TimeSeries</em> are in that group. In particular, a <em>TimeSeries</em> defines
components to store <em>data</em> and <em>time</em>.</p>
<p>The <em>data</em> element in the <em>TimeSeries</em> will typically be an array of any
valid HDF5 data type (e.g., a multi-dimensional floating point array).
The data stored can be in any unit. The attributes of the data field
must indicate the SI unit that the data relates to (or appropriate
counterpart, such as color-space) and the multiplier necessary to
convert stored values to the specified SI unit.</p>
<p><em>TimeSeries</em> support provides two time objects representations.
The first, <em>timestamps</em>, stores time information that is corrected
to the experiment’s time base (i.e., aligned to a master clock,
with time-zero aligned to the starting time of the experiment).
This field is used for data processing and
subsequent scientific analysis. The second, <em>sync</em>, is an optional group
that can be used to store the sample times as reported by the
acquisition/stimulus hardware, before samples are converted to a common
time-base and corrected relative to the master clock. This approach
allows the NWB format to support streaming of data directly from
hardware sources.</p>
<p>In addition to data and time, the <em>TimeSeries</em> group can be used to store additional
information beyond what is required by the
specification. I.e., an end user is free to add additional key/value
pairs as necessary for their needs via the concept of extensions. It should be noted that such
lab-specific extensions may not be recognized by analysis tools/scripts
existing outside the lab. Extensions are described in section (see <a class="reference internal" href="#sec-extending-the-format"><span class="std std-numref">Section 1.5</span></a>).</p>
</section>
<section id="data-processing-modules-organizing-processed-data">
<span id="sec-data-processing-modules"></span><h2><span class="section-number">1.4. </span>Data Processing Modules: Organizing processed data<a class="headerlink" href="#data-processing-modules-organizing-processed-data" title="Link to this heading"></a></h2>
<p>NWB uses <a class="reference internal" href="format.html#sec-processingmodule"><span class="std std-ref">ProcessingModule</span></a> to store
data for—and represent the results of—common
data processing steps, such as spike sorting and image segmentation,
that occur before scientific analysis of the data. Processing modules store the
data used by software tools to calculate these intermediate results.
All processing modules are stored directly in the group
<a class="reference external" href="#groups-processing">/processing</a>. The name of each module is chosen by the
data provider (i.e. processing modules have a “variable” name). The particular data
within each processing module is specified by one or more
<a class="reference internal" href="format.html#sec-nwbdatainterface"><span class="std std-ref">NWBDataInterface</span></a>, which are
groups residing directly within a processing module. Each NWBDataInterface has a unique
neurodata_type (e.g., <em>ImageSegmentation</em>) that describes and defines the data
contained in the NWBDataInterface. For NWBDataInterfaces designed for use with
processing modules, a default name (usually the same as the neurodata_type) is
commonly specified to further ease identification of the data in a file. However, to
support storage of multiple instances of the same subtype in the
same processing module, NWB allows users to optionally define custom names as well.</p>
</section>
<section id="extending-the-format">
<span id="sec-extending-the-format"></span><h2><span class="section-number">1.5. </span>Extending the format<a class="headerlink" href="#extending-the-format" title="Link to this heading"></a></h2>
<p>The data organization presented in this document constitutes the <em>core</em>
NWB format. Extensibility is handled via the concept of extensions,
allowing users to extend (i.e., add to) existing and create new neurodata_types
definitions for storing custom data. To avoid collisions between extensions,
extensions are defined as part of custom namespaces (which typically import
the core NWB namespace). Extensions to the format are written using the
<a class="reference external" href="https://schema-language.readthedocs.io/en/latest/">Specification Language</a> .
To ease development of extensions, the <a class="reference external" href="https://pynwb.readthedocs.io">PyNWB</a>
(and <a class="reference external" href="https://github.com/hdmf-dev/hdmf">HDMF</a> used by PyNWB) API provides dedicated
data structures that support programmatic creation and use of extensions. An
example for extending NWB using <a class="reference external" href="https://pynwb.readthedocs.io">PyNWB</a> is available at
<a class="reference external" href="https://pynwb.readthedocs.io/en/stable/tutorials/general/extensions.html">https://pynwb.readthedocs.io/en/stable/tutorials/general/extensions.html</a> and
additional details are also available as part of the <a class="reference external" href="https://pynwb.readthedocs.io">PyNWB</a> tutorials
<a class="reference external" href="https://pynwb.readthedocs.io/en/stable/tutorials/index.html">https://pynwb.readthedocs.io/en/stable/tutorials/index.html</a> .</p>
<p>Creating extensions allows adding and documenting new data to NWB, interaction with
custom data via the API, validation of custom data contents, sharing and collaboration
of extensions and data. Popular extensions may be proposed and
added to the official format specification after community discussion and review.
To propose a new extensions for the NWB core format you may file an issue
at <a class="reference external" href="https://github.com/NeurodataWithoutBorders/nwb-schema/issues">https://github.com/NeurodataWithoutBorders/nwb-schema/issues</a> .</p>
<section id="extending-timeseries-and-nwbcontainer">
<span id="sec-extending-the-ts-and-nc"></span><h3><span class="section-number">1.5.1. </span>Extending TimeSeries and NWBContainer<a class="headerlink" href="#extending-timeseries-and-nwbcontainer" title="Link to this heading"></a></h3>
<p>Like any other neurodata_type, <em>TimeSeries</em> can be extended via extensions
by defining corresponding derived neurodata_types. This is typically done to
to represent more narrowly focused modalities (e.g.,
electrical versus optical physiology) as well as new modalities (e.g.,
video tracking of whisker positions). When a neurodata_type inherits from <em>TimeSeries</em>,
new data objects (i.e., datasets, attributes, groups, and links)
can be added while all objects of the parent <em>TimeSeries</em> type are
inherited and, hence, part of the new neurodata_type. Section <a class="reference internal" href="format.html#sec-timeseries"><span class="std std-numref">Section 2.1.9</span></a>
includes a list of all <em>TimeSeries</em> types.</p>
<p>Extending <em>NWBContainer</em> works in the same way, e.g., to create more specific types for
data processing.</p>
</section>
</section>
<section id="common-attributes">
<h2><span class="section-number">1.6. </span>Common attributes<a class="headerlink" href="#common-attributes" title="Link to this heading"></a></h2>
<p>All NWB Groups and Datasets with an assigned neurodata_type have three required attributes: <cite>neurodata_type</cite>,
<cite>namespace</cite>, and <cite>object_id</cite>.</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">neurodata_type</span></code> (variable-length string) is the name of the NWB primitive that this group or dataset maps onto</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">namespace</span></code> (variable-length string) is the namespace where <code class="docutils literal notranslate"><span class="pre">neurodata_type</span></code> is defined, e.g. “core” or the
namespace of an extension</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">object_id</span></code> (variable-length string) is a universally unique identifier for this object within its hierarchy.
It should be set to the string representation of a random UUID version 4 value
(see <a class="reference external" href="https://datatracker.ietf.org/doc/html/rfc4122">RFC 4122</a>) upon first creation. It is <strong>not</strong> a hash of the data. Files
that contain the exact same data but were generated in different instances will have different <code class="docutils literal notranslate"><span class="pre">object_id</span></code> values.
Currently, modification of an object does not require its <code class="docutils literal notranslate"><span class="pre">object_id</span></code> to be changed.</p></li>
</ul>
</section>
</section>
<section id="comments-and-definitions">
<h1><span class="section-number">2. </span>Comments and Definitions<a class="headerlink" href="#comments-and-definitions" title="Link to this heading"></a></h1>
<section id="notation">
<h2><span class="section-number">2.1. </span>Notation<a class="headerlink" href="#notation" title="Link to this heading"></a></h2>
<p>The description of the format is divided into subsection based on <em>neurodata_type</em>. Each <em>neurodata_type</em> section includes:</p>
<ul class="simple">
<li><p>A basic description of the type</p></li>
<li><p>An optional figure describing the organization of data within the type</p></li>
<li><p>A set of tables describing the datasets, attributes and groups contained in the type.</p></li>
<li><p>An optional set of further subsections describing the content of subgroups contained in the given <em>neurodata_type</em>.</p></li>
</ul>
<p>In the tables we use the following notation in the <strong>Id</strong> column to uniquely identify datasets, groups, attributes:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">`name`</span></code> describes the unique name of an object</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">`&lt;neurodata_type&gt;`</span></code> describes the <code class="docutils literal notranslate"><span class="pre">`neurodata_type`</span></code> of the object in case that the object does not have a unique name</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">`—`</span></code> prefixes are used to indicate the depth of the object in the hierarchy to allow identification of the parent
of the object. E.g., an object with a <code class="docutils literal notranslate"><span class="pre">`——`</span></code> prefix will belong to the previous object with a <code class="docutils literal notranslate"><span class="pre">`—`</span></code> prefix.</p></li>
</ul>
<p>Here a quick example:</p>
<table class="longtable docutils align-default" id="id1">
<caption><span class="caption-number">Table 2.1 </span><span class="caption-text">Example illustrating the description of the contents of <code class="docutils literal notranslate"><span class="pre">`neurodata_types`</span></code>.</span><a class="headerlink" href="#id1" title="Link to this table"></a></caption>
<thead>
<tr class="row-odd"><th class="head"><p>Id</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>&lt;MyTimeSeries&gt;</p></td>
<td><p>group</p></td>
<td><p>Top level group for the neurodata_type. The group the neurodata_type <em>MyTimeSeries</em> but no fixed name</p></td>
</tr>
<tr class="row-odd"><td><p>—myattr</p></td>
<td><p>attribute</p></td>
<td><p>Attribute with the fixed name myattr defined on &lt;MyTimeSeries&gt;</p></td>
</tr>
<tr class="row-even"><td><p>—mydata</p></td>
<td><p>dataset</p></td>
<td><p>Required dataset with a unique name contained in &lt;MyTimeSeries&gt;</p></td>
</tr>
<tr class="row-odd"><td><p>——unit</p></td>
<td><p>attribute</p></td>
<td><p>Attribute unit defined on the dataset .mydata</p></td>
</tr>
<tr class="row-even"><td><p>—myotherdata</p></td>
<td><p>dataset</p></td>
<td><p>Optional dataset with a unique name contained in &lt;MyTimeSeries&gt;</p></td>
</tr>
<tr class="row-odd"><td><p>—&lt;ElectricalSeries&gt;</p></td>
<td><p>group</p></td>
<td><p>Optional set of groups with the neurodata_type ElectricalSeries that are contained in &lt;MyTimeSeries&gt;</p></td>
</tr>
</tbody>
</table>
</section>
<section id="storing-time-values">
<h2><span class="section-number">2.2. </span>Storing Time Values<a class="headerlink" href="#storing-time-values" title="Link to this heading"></a></h2>
<p>All times are stored in seconds using double precision (64-bit) floating
point values. A smaller floating point value, e.g., 32-bit, is <strong>not</strong>
permitted for storing times. This is because significant errors for time
can result from using smaller data sizes. Throughout this document,
sizes (number of bits) are specified for many datatypes (e.g., float32).
For fields with a specified size, larger sizes can be used, so long as
the selected size encompasses the full range of data, and for floats,
without loss of significant precision.</p>
</section>
<section id="links-and-data-references">
<h2><span class="section-number">2.3. </span>Links and data references<a class="headerlink" href="#links-and-data-references" title="Link to this heading"></a></h2>
<p><strong>Soft Links:</strong> In some instances, the specification refers to links. When links
are made within a file, NWB uses soft-links and not hard-links.
This is because soft-links distinguish between the link and the
target of the link, whereas hard-links cause multiple names (paths) to
be created for the target, and there is no way to determine which of
these names are preferable in a given situation. If the target of a soft
link is removed (or moved to another location), then the soft link will “dangle,”
that is point to a target that no longer exists. For this reason, moving
or removing targets of soft links should be avoided unless the links are
updated to point to the new location.</p>
<p><strong>Object References:</strong> Object references are similar
to SoftLinks but instead of being stored as elements in the data hierarchy
(similar to a Group or Dataset) the object reference defines a data type
on a Dataset, i.e., the object references are stored as elements in a
Dataset.</p>
<p><strong>Region References:</strong> Region references are similar to object references
but instead of pointing to another Group/Dataset as a whole a region reference
defines an additional selection and as such describe a reference to a subset
of a dataset.</p>
</section>
<section id="design-notes">
<h2><span class="section-number">2.4. </span>Design notes<a class="headerlink" href="#design-notes" title="Link to this heading"></a></h2>
<p><strong>Data type sizes</strong></p>
<p>The listed size of integers and floating point values is the minimum size.
The size of the data type should be large enough to store the
required data, and preferably not larger. 64-bit floating point (double)
is required for timestamps, while 32-bit floating point is largely
sufficient for other uses.</p>
<p><strong>Extra fields</strong></p>
<p>All parts of an NWB file should be governed by either the core schema or
defined in a neurodata extension (NDX). <em>Extra fields</em> are any datasets,
attributes, groups, links etc. that are included in a file but which are
not described by the NWB schema or a neurodata extension (NDX). Extra fields
are not considered  part of the NWB file and as such, any NWB API may ignore
extra fields. For API’s this specifically means:</p>
<ul class="simple">
<li><p>an NWB file that includes extra fields should be readable by the API
as long as the file is otherwise valid,</p></li>
<li><p>an API is permitted to ignore extra fields on read,</p></li>
<li><p>an API is permitted to ignore (including remove) extra fields on write.</p></li>
</ul>
<p>In practice, the use of extra fields is highly discouraged and instead neurodata
extensions (NDX) should be used to extend NWB to include additional fields
if necessary.</p>
<p><strong>Why do timestamps_link and data_link record linking between
datasets, but links between epochs and timeseries are not recorded?</strong></p>
<p>Epochs have a link to entire timeseries (i.e., the HDF5 group). If 100
epochs link to a time series, there is only one time series. The data
and timestamps within it are not shared anywhere (at least from the
epoch linking). An epoch is an entity that is put in for convenience and
annotation so there isn’t necessarily an important association between
what epochs link to what time series (all epochs could link to all time
series).</p>
<p>The timestamps_link and data_link fields refer to links made between
time series, such as if timeseries A and timeseries B, each having
different data (or time) share time (or data). This is much more
important information as it shows structural associations in the data.</p>
</section>
<section id="tables-and-ragged-arrays">
<h2><span class="section-number">2.5. </span>Tables and ragged arrays<a class="headerlink" href="#tables-and-ragged-arrays" title="Link to this heading"></a></h2>
<p>The NWB schema includes several tables, such as for storing data/metadata
about trials, epochs, single units and multi-units, electrodes, and ROIs.
All of the tables in NWB derive from the base data type, DynamicTable.
DynamicTable is a column-based representation of a table that allows
users to add custom columns (of type VectorData) that are not
pre-defined in the specification. This is useful for handling types of
data where every experiment or lab may want to store information
unique to that experiment or lab, e.g., metadata
related to the trials in a session or spike sorting metrics.</p>
<p>DynamicTable objects typically contain columns that are of equal length,
where the i-th element of a column corresponds to the i-th element of
all of the other columns. In other words, each row has a single item
in each column. However, in some situations, users may wish to store and
associate multiple items in a single column for each row. For example,
in the Units table, each row represents a single sorted unit and each
unit has multiple spike times associated with it, where the number of
spike times differs between units (rows). This is sometimes called a
ragged array or jagged array.</p>
<p>Ragged array columns can be created by creating a primary VectorData
column that contains all of the data values (e.g., spike times) and
creating a secondary VectorIndex column that contains a mapping from rows
to elements of its target VectorData column. The VectorIndex column has the same
number of elements (rows) as the rest of the table.</p>
<p>The values of the VectorIndex column follow the mapping such that the data
associated with the first row is at VectorData[0:VectorIndex[0]], and the data
associated with the second row is at VectorData[VectorIndex[0]:VectorIndex[1]],
and so on.</p>
<a class="reference internal image-reference" href="_images/units_spike_times.png"><img alt="Demonstration of how spike times are stored in a ragged array column in the Units table." src="_images/units_spike_times.png" style="width: 800px;" />
</a>
</section>
<section id="doubly-ragged-arrays">
<h2><span class="section-number">2.6. </span>Doubly ragged arrays<a class="headerlink" href="#doubly-ragged-arrays" title="Link to this heading"></a></h2>
<a class="reference internal image-reference" href="_images/units_waveforms.png"><img alt="Demonstration of how waveforms are stored in a double ragged array column in the Units table." src="_images/units_waveforms.png" style="width: 800px;" />
</a>
</section>
<section id="references-to-rows-of-a-table">
<h2><span class="section-number">2.7. </span>References to rows of a table<a class="headerlink" href="#references-to-rows-of-a-table" title="Link to this heading"></a></h2>
<a class="reference internal image-reference" href="_images/units_electrodes.png"><img alt="Demonstration of how references to rows of the electrodes table are stored in the electrodes column of the Units table." src="_images/units_electrodes.png" style="width: 800px;" />
</a>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="index.html" class="btn btn-neutral float-left" title="Welcome to the NWB Format Specification" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="format.html" class="btn btn-neutral float-right" title="1. Format Overview" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2017-2025, Neurodata Without Borders.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>